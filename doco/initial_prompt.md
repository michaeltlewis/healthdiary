I'd like to design A "health diary" application which will be implemented as a website with the expectation that it is primarily used by IPhone or android users, but can alos be used from a normal computer. 
I would like you to create some design documentation in markdown form so that it is ready for you or another developer to build the system. 
The website will be called health diary.
Although I'd like the basic implementation to be hosted in the cloud I want it to be reasonably agnostic to the actual CSP, so that we can change CSP if needed. The initial implementation will be designed to run on AWS however. 
It will make relevant use of LLM's such as Open AI or anthropic to both help the user create diary entries and also analyse the content to be able to summarise it for various purposes which will include summarising into a reasonably structured form that are GP doctor would find useful. 
The basic features will include a sign up page that will capture a user name, And select features of interest which will include the following: 
•	Interaction style which can be 1 of minimal, friendly, reassuring. 
•	A selection of subjects to prompt for including: Sleep, food and drink consumed, exercise, feeling of wellness, mood, symptoms. If sleep is selected then add additional UI components to enter the time of day that the user normally wakes up and goes to sleep.
•	Register your AI provider, which provide a selection of the common AI providers including open AI, anthropic [we add others later, and focus on open AI for now]. 
Once the user is Logged on, the main feature, which would be extremely easily to access when opening the site, is to record a diary entry. Note that we will need additional ways to access other features, which should include diary analysis, diary reports, and settings. This should use the microphone and use the Open AI whisper API To record and transcribe voice description.  Once the text has been described we should save this as an S3 object in an area specific to that user. Within that user storage area we should store that transcript as a “raw transcript”, in markdown form. And obviously this file will need to have a date-time.  Then we should consider what subject selections the user has made and for any selected we should analyse the text to see whether they have included a description relevant to that subject and if they haven't we should briefly prompt them to ask if they want to make any notes about that subject. We should then trigger a call to the chat API such as GPT 4, to summarise the information that they provided tagging it appropriately so that it is in a more structured form. We can either store this again as markdown or as JSON. 

In all these cases we should in code relevant system prompts to be able to guide an LLM in holding a brief conversation with the user to help them create their diary entry.  Additionally we should have user specific settings that include prompts to refine the system prompt as relevant to this particular user's needs.
In terms of implementation we've said we need AWS, S3, and I'd like your suggestions on whether we should do this with a permanently accessible container based app and what our language we should use in writing this and how we should store information. We should use terraform or some sensible alternative to create the infrastructure as code. Clearly given the sensitive nature of the content best practise in terms of security should be applied in building this infrastructure. 
To the design document please add clearly delineated subsections with suggestions of extra features that might be useful but do ensure these are clearly delineated from the rest of the design directives. 
To elaborate the other features in the settings we would want the ability to adjust the subject selections, export all of the data that we have for that particular user (Except for implementation details), And also the option to recorded for a user either entirely or within a particular time range, and also with the option to entirely close their account also.
The other main feature is to the diary between selected dates, Either in raw or summarised form - in both cases it should be rendered for easy reading and scrolling. We should also allow file download or emailing emailing to a selected e-mail address, either the raw or summarised form. 

in terms of UI, allow the site to be responsive in layout. Keep in mind that the design should be simple and obvious and that the person using a health diary may be feeling unwell and not want to interact with the site in complex ways. For example, they may be having a migraine and unable to look at the phone particularly well.

From the above please create me a detailed design in markdown form, saving it as "doco/detailed_design.md".  Do not use emojis.  

